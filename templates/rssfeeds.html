{% extends "base.html" %}

{% block content %}
<div class="pagetitle ps-2  ms-1  pt-3">
    <h1>RSS Feeds</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('dashboard') }}">Home</a></li>
            <li class="breadcrumb-item active">RSS Feeds</li>
        </ol>
    </nav>
</div>

<section class="section">
    <div class="container-fluid">
        <!-- Posts Container -->
        
            <div id="posts-container" class="row"> </div>
         
        
            <!-- Posts will be dynamically loaded here -->
        </div>
        <!-- Loading Spinner -->
        <div id="loading-spinner" class="text-center my-4" style="display: none;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
</section>

<!-- Load External JavaScript File -->
<script src="{{ url_for('static', filename='assets/js/rssfeeds.js') }}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>

<script>
let inactivityTimer;
const REFRESH_TIMEOUT = 180000; // 3 minutes in milliseconds

function resetInactivityTimer() {
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(() => {
        console.log("Refreshing page due to inactivity...");
        window.location.reload();
    }, REFRESH_TIMEOUT);
}

// Reset timer on user activity
document.addEventListener('mousemove', resetInactivityTimer);
document.addEventListener('keypress', resetInactivityTimer);
document.addEventListener('scroll', resetInactivityTimer);
document.addEventListener('click', resetInactivityTimer);

// Initial setup of timer
resetInactivityTimer();

// Clear timer when leaving the page
window.addEventListener('beforeunload', () => {
    clearTimeout(inactivityTimer);
});
</script>

{% endblock %}